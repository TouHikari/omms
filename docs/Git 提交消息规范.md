# Git 提交消息规范

## 基本格式
首行遵循 `type(scope)!: subject`，正文与页脚均为可选。

```
<type>(<scope>)<optional !>: <subject>

<body>

<footer>
```

- `type` 表示变更类型；`scope` 为影响范围（模块/目录/包名）；`!` 不兼容变更
- `subject` 使用祈使句，简洁说明“做什么”，建议不超过 50 字符
- `body` 用空行与首行分隔，解释动机、实现要点、影响与风险
- `footer` 关联问题或声明 `BREAKING CHANGE`

## 类型
- feat 新功能
- fix 问题修复
- docs 文档变更
- style 代码风格（不影响逻辑）
- refactor 重构（非新增功能、非修复）
- perf 性能优化
- test 测试相关
- build 构建系统或依赖
- ci CI 配置与脚本
- chore 其他杂务（如锁文件、脚手架）
- revert 回滚某次提交

## 主题（subject）规则
- 使用祈使句：添加/修复/优化/移除/重构/升级……
- 统一语言（中文或英文一致），避免笼统词如“更新”
- 避免结尾标点与冗长描述，建议 ≤ 50 字符
- `scope` 能明确就填写，如 `auth`、`api`、`ui`
- 存在不兼容变更时在类型后加 `!`

## 正文（body）规则
- 1–3 段回答：为什么需要、如何实现、影响/风险
- 每行建议 ≤ 72 字符
- 可用短横线列出要点，避免与代码重复的细节
- 涉及迁移或使用变化时给出简要指引

## 页脚（footer）规则
- 关联问题或任务：`Closes #123`、`Refs JIRA-456`
- 不兼容声明：`BREAKING CHANGE: <说明与迁移指引>`
- 共同作者：`Co-authored-by: 姓名 <email>`
- 回滚说明在 `revert` 的正文中指明原提交

## 示例
- `feat(auth): 支持短信登录`
- `fix(api): 修复分页偏移计算错误`
- `refactor(ui): 提取列表为空态为可复用组件`
- `perf(image): 缓存缩略图生成以降低 CPU 占用`
- `docs(readme): 更新安装与快速开始章节`
- `test: 添加订单导出边界用例`
- `build: 升级 webpack 到 v5 并调整分包策略`
- `ci: 在 PR 上增加 e2e 阶段与报告上传`
- `chore: 同步依赖锁文件并规范 npmrc`
- `feat(storage)!: 默认驱动改为 s3 并移除本地模式`

完整示例：
```
feat(storage)!: 默认驱动改为 s3 并移除本地模式

统一生产与测试环境存储，减少环境差异。

- 新增 s3 客户端封装
- 移除 localStorage 代码路径
- 旧配置中的 local 模式不再可用
- BREAKING CHANGE: 需要在配置中设置 S3_* 环境变量，并执行数据迁移脚本

Closes #128
```

## 使用建议
- 保持提交粒度可理解、可回滚，避免把多类变更混在一个提交
- 首行信息可读性优先，让阅读日志者不看正文也能理解意图
- 涉及多个功能切面时明确 `scope`，提升检索与追踪效率
- 团队约定后保持一致性，PR 标题建议沿用同样格式