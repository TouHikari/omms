# 前端开发规范

本文档旨在规范 `omms_frontend` 项目的开发流程与代码风格，确保代码的可维护性与一致性。

## 1. 技术栈概述

| 类别       | 技术选型               | 说明                                    |
| :--------- | :--------------------- | :-------------------------------------- |
| 框架       | **Vue 3**              | 使用 Composition API (`<script setup>`) |
| 构建工具   | **Vite**               | 高性能前端构建工具                      |
| UI 组件库  | **Ant Design Vue 4.x** | 企业级 UI 设计语言和 Vue 组件库         |
| 状态管理   | **Pinia**              | 模块化、类型安全的状态管理              |
| 路由       | **Vue Router 4.x**     | 官方路由管理器                          |
| 样式预处理 | **SCSS**               | 使用 Sass 进行样式编写                  |
| 代码规范   | **ESLint + Prettier**  | 代码检查与自动格式化                    |

## 2. 目录结构规范

```
omms_frontend/
├── src/
│   ├── api/            # API 接口封装 (按业务模块划分文件)
│   ├── assets/         # 静态资源 (图片、全局样式变量)
│   ├── components/     # 通用组件与业务组件
│   │   ├── [Module]/   # 复杂模块可建立子目录，如 Appointments/
│   │   └── [Name].vue  # 通用组件
│   ├── layouts/        # 页面布局组件 (DefaultLayout, PageLayout 等)
│   ├── router/         # 路由配置
│   ├── stores/         # Pinia 状态管理 (Setup Store 风格)
│   ├── views/          # 页面级组件 (按路由划分)
│   ├── App.vue         # 根组件
│   └── main.js         # 入口文件
└── docs/               # 项目文档
```

## 3. 命名规范

### 3.1 文件与目录

- **组件文件**: 使用 **PascalCase** (大驼峰)，如 `AppHeader.vue`, `AppointmentsList.vue`。
- **JS/TS 文件**: 使用 **camelCase** (小驼峰)，如 `appointment.js`, `auth.js`。
- **目录名**:
  - 组件目录推荐 **PascalCase**，如 `components/Appointments/`。
  - 其他目录推荐 **camelCase**，如 `src/utils/`。

### 3.2 变量与函数

- **变量/常量**: 使用 **camelCase**，如 `isLoading`, `userData`。
- **常量 (Constant)**: 全局常量使用 **UPPER_SNAKE_CASE**，如 `MAX_RETRY_COUNT`。
- **函数**: 使用动词开头，**camelCase**，如 `getAppointments`, `handleSubmit`。
  - 获取数据: `get...`
  - 更新数据: `update...`
  - 删除数据: `delete...`
  - 处理事件: `handle...` / `on...`

### 3.3 组件命名

- 组件名应由多个单词组成，避免与 HTML 标签冲突。
- 基础组件使用特定前缀 (如 `App...`, `Base...`)。
- 紧密耦合的子组件以父组件名为前缀，如 `AppointmentsList.vue` 是 `Appointments` 的相关组件。

## 4. 代码风格规范

本项目遵循 Standard JS 风格，并结合 Prettier 进行格式化。

### 4.1 Vue 组件风格

- 统一使用 **`<script setup>`** 语法糖。
- **导入顺序**:
  1. Vue 核心 (`ref`, `computed`, `watch`)
  2. Vue Router / Pinia
  3. 第三方库 / UI 组件
  4. 本地组件 (`@/components/...`)
  5. API / Utils / Types
- **Props 定义**: 使用 `defineProps`。
- **Emits 定义**: 使用 `defineEmits`。

### 4.2 格式化规则 (Prettier)

- **分号**: 不使用 (`semi: false`)
- **引号**: 单引号 (`singleQuote: true`)
- **行宽**: 100 字符 (`printWidth: 100`)
- **缩进**: 2 空格

### 4.3 样式规范

- 使用 **SCSS**。
- 组件样式默认添加 `scoped` 属性。
- 全局变量引入: `@use '@/assets/_variables.scss' as *;`。**通用性的全局变量建议在 `_variables.scss` 中定义并使用，避免在组件中直接定义**。
- 避免过深的嵌套 (建议不超过 3 层)。

## 5. 状态管理 (Pinia)

- 使用 **Setup Stores** 风格 (`defineStore('id', () => { ... })`)。
- Store 文件名与 ID 保持一致 (或相关)，如 `stores/auth.js` -> ID: `auth`。
- 状态直接使用 `ref` 定义。
- Getters 使用 `computed` 定义。
- Actions 使用普通 `function` 定义。

## 6. API 接口封装

- 所有 HTTP 请求封装在 `src/api/` 目录下。
- 避免在组件中直接调用 `axios` 或 `fetch`。
- 接口函数返回 `Promise`，并建议统一处理错误或返回标准结构 `{ code, data, message }`。
- 模拟数据 (Mock) 阶段，建议使用 `setTimeout` 模拟网络延迟，确保 UI loading 状态正常交互。

## 7. Git 提交规范

遵循 [Conventional Commits](https://www.conventionalcommits.org/) 规范，详见 `docs/Git 提交消息规范.md`。

格式: `<type>(<scope>): <subject>`

- **feat**: 新功能
- **fix**: 修复 Bug
- **docs**: 文档变更
- **style**: 代码格式调整 (不影响逻辑)
- **refactor**: 代码重构
- **perf**: 性能优化
- **chore**: 构建/工具链变动

示例:

- `feat(auth): 增加用户登录功能`
- `fix(appointment): 修复预约时间显示错误`
